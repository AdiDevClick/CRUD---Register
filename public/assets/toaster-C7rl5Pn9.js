var T=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var t=(i,e,s)=>(T(i,e,"read from private field"),s?s.call(i):e.get(i)),c=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},u=(i,e,s,l)=>(T(i,e,"write to private field"),l?l.call(i,s):e.set(i,s),s);var m=(i,e,s)=>(T(i,e,"access private method"),s);function k(i,e={}){const s=document.createElement(i);for(const[l,V]of Object.entries(e))V!==null&&s.setAttribute(l,V);return s}function q(i,e){return new Promise(s=>{setTimeout(()=>{s(e)},i)})}class B{constructor(e){this.alert=e.toasterContainer.querySelector(".toast"),e.toasterContainer.addEventListener("dragstart",s=>s.preventDefault()),e.toasterContainer.addEventListener("mousedown",this.startDrag.bind(this),{passive:!0}),e.toasterContainer.addEventListener("touchstart",this.startDrag.bind(this),{passive:!0}),window.addEventListener("mousemove",this.drag.bind(this)),window.addEventListener("touchmove",this.drag.bind(this)),window.addEventListener("touchend",this.endDrag.bind(this)),window.addEventListener("mouseup",this.endDrag.bind(this)),window.addEventListener("touchcancel",this.endDrag.bind(this)),this.toaster=e}startDrag(e){if(e.touches){if(e.touches.length>1)return;e=e.touches[0]}this.origin={x:e.screenX,y:e.screenY},this.disableTransition(),this.width=this.toaster.toasterContainer.offsetWidth}drag(e){if(this.origin){const s=e.touches?e.touches[0]:e,l={x:s.screenX-this.origin.x,y:s.screenY-this.origin.y};e.touches&&Math.abs(l.x)>Math.abs(l.y)&&(e.cancelable&&e.preventDefault(),e.stopPropagation()),this.lastTranslate=l,this.translate(100*l.x/this.width)}}translate(e){this.toaster.toasterContainer.style.transform="translate3d("+e+"%,  0, 0)"}disableTransition(){this.toaster.toasterContainer.style.transition="none"}enableTransition(){this.toaster.toasterContainer.style.transition=""}async endDrag(e){this.origin&&this.lastTranslate&&(this.enableTransition(),Math.abs(this.lastTranslate.x/this.toasterWidth)>.2&&(this.lastTranslate.x<0||this.lastTranslate.x>0)&&(this.alert.classList.add("close"),this.alert.addEventListener("animationend",()=>{this.toaster.toasterContainer.remove()}))),this.origin=null}get toasterWidth(){return this.toaster.toasterContainer.offsetWidth}}var g,p,a,v,f,x,b,L,w,A,y,P,C,j,E,U,S,W;class O{constructor(e,s="Erreur"){c(this,w);c(this,y);c(this,C);c(this,E);c(this,S);c(this,g,void 0);c(this,p,void 0);c(this,a,void 0);c(this,v,void 0);c(this,f,void 0);c(this,x,void 0);c(this,b,void 0);c(this,L,void 0);u(this,g,e),u(this,p,s),this.toasterContainer||(m(this,w,A).call(this),this.toasterContainer=document.querySelector(".toast-container")),u(this,L,this.toasterContainer.dataset.endpoint),u(this,x,JSON.parse(this.toasterContainer.dataset.elements)),u(this,b,document.querySelector(this.toasterContainer.dataset.template)),u(this,a,t(this,b).content.firstElementChild.cloneNode(!0)),u(this,v,t(this,a).querySelector(this.toasterContainer.dataset.progressbar)),u(this,f,t(this,a).querySelector(this.toasterContainer.dataset.closebtn)),m(this,C,j).call(this),m(this,y,P).call(this),t(this,a).addEventListener("animationend",l=>{m(this,E,U).call(this,l)}),t(this,f).addEventListener("click",l=>{m(this,S,W).call(this,l)},{once:!0}),new B(this)}}g=new WeakMap,p=new WeakMap,a=new WeakMap,v=new WeakMap,f=new WeakMap,x=new WeakMap,b=new WeakMap,L=new WeakMap,w=new WeakSet,A=function(){const e=k("div",{class:"toast-container",role:"alert","data-template":"#alert-layout","data-progressbar":".progress","data-elements":'{"title": ".text-1", "body": ".text-2"}',"data-closebtn":".toggle_btn-box","data-endpoint":"./templates/toaster_template.html"});document.body.append(e)},y=new WeakSet,P=function(){if(this.toasterContainer)this.toasterContainer.insertAdjacentElement("beforeend",t(this,a));else return},C=new WeakSet,j=function(){t(this,a).classList.add("active"),t(this,f).classList.add("open"),t(this,a).classList.add(t(this,p)),t(this,p)==="Success"?t(this,a).querySelector("i").classList.add("fa-check"):t(this,a).querySelector("i").classList.add("fa-info"),t(this,v).classList.add("active"),t(this,a).querySelector(".text-1").innerText=t(this,p),t(this,a).querySelector(".text-2").innerText=t(this,g)},E=new WeakSet,U=async function(e){await q(5e3),t(this,a).classList.remove("active"),await q(300),t(this,v).classList.remove("active"),t(this,a).remove(),this.toasterContainer.remove()},S=new WeakSet,W=async function(e){e.preventDefault(),t(this,a).classList.remove("active"),t(this,a).classList.add("close"),await q(300),t(this,v).classList.remove("active"),t(this,a).addEventListener("animationend",()=>{t(this,a).remove(),this.toasterContainer.remove()})};function d(i,e,s){return s.delete(e),window.history.replaceState({},document.title,i)}let n,h,o=!1;const R=window.location,r=new URLSearchParams(R.search),D=r.get("error");D==="invalid-input"&&(o=!0,n="Veuillez modifier votre identifiant",d("index.php","error",r));D==="no-update_id"&&(o=!0,n="La recette à mettre à jour n'existe pas",d("index.php","error",r));D==="no-delete-id"&&(o=!0,n="La recette que vous tentez de supprimer n'existe pas",d("index.php","error",r));const M=r.get("delete");M==="success"&&(o=!0,h="Success",n="La recette a été supprimée avec succès",d("index.php","delete",r));M==="error"&&(o=!0,n="Une erreur s'est produite lors de la suppression de la recette",d("index.php","delete",r));const z=r.get("success");z==="disconnected"&&(o=!0,h="Success",n="Vous avez été déconnecté avec succès",d("index.php","success",r));z==="recipe-shared"&&(o=!0,h="Success",n="Votre recette vient d'être partagée, elle semble excellente !",d("index.php","success",r));z==="recipe-updated"&&(o=!0,h="Success",n="Votre recette a bien été mise à jour!",d("index.php","success",r));const X=r.get("reset");X==="success"&&(o=!0,h="Success",n="Un email a été envoyé à l'adresse que vous avez saisie",d("index.php","reset",r));const Y=r.get("login");Y==="success"&&(o=!0,h="Success",n="Vous êtes connecté avec succès",d("index.php","login",r));const N=r.get("register");N==="success"&&(o=!0,h="Success",n="Votre compte a été enregistré avec succès, vous pouvez maintenant vous connecter",d("index.php","register",r));N==="failed"&&(o=!0,h="Erreur",n="Problème dans la création de votre compte, veuillez vérifier que tous les champs soient correctement remplis",d("register.php","failed",r));const _=r.get("failed");_==="recipe-creation"&&(o=!0,h="Erreur",n="Veuillez vous enregistrer ou vous identifier avant de pouvoir partager une recette",d("register.php","failed",r));_==="update-recipe"&&(o=!0,h="Erreur",n="Veuillez vous enregistrer ou vous identifier avant de pouvoir modifier cette recette",d("register.php","failed",r));o&&new O(n,h);
