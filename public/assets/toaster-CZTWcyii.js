var T=(i,t,s)=>{if(!t.has(i))throw TypeError("Cannot "+s)};var e=(i,t,s)=>(T(i,t,"read from private field"),s?s.call(i):t.get(i)),n=(i,t,s)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,s)},u=(i,t,s,o)=>(T(i,t,"write to private field"),o?o.call(i,s):t.set(i,s),s);var m=(i,t,s)=>(T(i,t,"access private method"),s);function U(i,t={}){const s=document.createElement(i);for(const[o,V]of Object.entries(t))V!==null&&s.setAttribute(o,V);return s}function q(i,t){return new Promise(s=>{setTimeout(()=>{s(t)},i)})}class k{constructor(t){this.alert=t.toasterContainer.querySelector(".toast"),t.toasterContainer.addEventListener("dragstart",s=>s.preventDefault()),t.toasterContainer.addEventListener("mousedown",this.startDrag.bind(this),{passive:!0}),t.toasterContainer.addEventListener("touchstart",this.startDrag.bind(this),{passive:!0}),window.addEventListener("mousemove",this.drag.bind(this)),window.addEventListener("touchmove",this.drag.bind(this)),window.addEventListener("touchend",this.endDrag.bind(this)),window.addEventListener("mouseup",this.endDrag.bind(this)),window.addEventListener("touchcancel",this.endDrag.bind(this)),this.toaster=t}startDrag(t){if(t.touches){if(t.touches.length>1)return;t=t.touches[0]}this.origin={x:t.screenX,y:t.screenY},this.disableTransition(),this.width=this.toaster.toasterContainer.offsetWidth}drag(t){if(this.origin){const s=t.touches?t.touches[0]:t,o={x:s.screenX-this.origin.x,y:s.screenY-this.origin.y};t.touches&&Math.abs(o.x)>Math.abs(o.y)&&(t.cancelable&&t.preventDefault(),t.stopPropagation()),this.lastTranslate=o,this.translate(100*o.x/this.width)}}translate(t){this.toaster.toasterContainer.style.transform="translate3d("+t+"%,  0, 0)"}disableTransition(){this.toaster.toasterContainer.style.transition="none"}enableTransition(){this.toaster.toasterContainer.style.transition=""}async endDrag(t){this.origin&&this.lastTranslate&&(this.enableTransition(),Math.abs(this.lastTranslate.x/this.toasterWidth)>.2&&(this.lastTranslate.x<0||this.lastTranslate.x>0)&&(this.alert.classList.add("close"),this.alert.addEventListener("animationend",()=>{this.toaster.toasterContainer.remove()}))),this.origin=null}get toasterWidth(){return this.toaster.toasterContainer.offsetWidth}}var g,p,r,v,f,w,b,y,L,z,C,A,x,P,E,W,S,j;class B{constructor(t,s="Erreur"){n(this,L);n(this,C);n(this,x);n(this,E);n(this,S);n(this,g,void 0);n(this,p,void 0);n(this,r,void 0);n(this,v,void 0);n(this,f,void 0);n(this,w,void 0);n(this,b,void 0);n(this,y,void 0);u(this,g,t),u(this,p,s),this.toasterContainer||(m(this,L,z).call(this),this.toasterContainer=document.querySelector(".toast-container")),u(this,y,this.toasterContainer.dataset.endpoint),u(this,w,JSON.parse(this.toasterContainer.dataset.elements)),u(this,b,document.querySelector(this.toasterContainer.dataset.template)),u(this,r,e(this,b).content.firstElementChild.cloneNode(!0)),u(this,v,e(this,r).querySelector(this.toasterContainer.dataset.progressbar)),u(this,f,e(this,r).querySelector(this.toasterContainer.dataset.closebtn)),m(this,x,P).call(this),m(this,C,A).call(this),e(this,r).addEventListener("animationend",o=>{m(this,E,W).call(this,o)}),e(this,f).addEventListener("click",o=>{m(this,S,j).call(this,o)},{once:!0}),new k(this)}}g=new WeakMap,p=new WeakMap,r=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakMap,b=new WeakMap,y=new WeakMap,L=new WeakSet,z=function(){const t=U("div",{class:"toast-container",role:"alert","data-template":"#alert-layout","data-progressbar":".progress","data-elements":'{"title": ".text-1", "body": ".text-2"}',"data-closebtn":".toggle_btn-box","data-endpoint":"./templates/toaster_template.html"});document.body.append(t)},C=new WeakSet,A=function(){if(this.toasterContainer)this.toasterContainer.insertAdjacentElement("beforeend",e(this,r));else return},x=new WeakSet,P=function(){e(this,r).classList.add("active"),e(this,f).classList.add("open"),e(this,r).classList.add(e(this,p)),e(this,p)==="Success"?e(this,r).querySelector("i").classList.add("fa-check"):e(this,r).querySelector("i").classList.add("fa-info"),e(this,v).classList.add("active"),e(this,r).querySelector(".text-1").innerText=e(this,p),e(this,r).querySelector(".text-2").innerText=e(this,g)},E=new WeakSet,W=async function(t){await q(5e3),e(this,r).classList.remove("active"),await q(300),e(this,v).classList.remove("active"),e(this,r).remove(),this.toasterContainer.remove()},S=new WeakSet,j=async function(t){t.preventDefault(),e(this,r).classList.remove("active"),e(this,r).classList.add("close"),await q(300),e(this,v).classList.remove("active"),e(this,r).addEventListener("animationend",()=>{e(this,r).remove(),this.toasterContainer.remove()})};function l(i,t,s){return s.delete(t),window.history.replaceState({},document.title,i)}let c,h,d=!1;const O=window.location,a=new URLSearchParams(O.search),R=a.get("error");R==="invalid-input"&&(d=!0,c="Veuillez modifier votre identifiant",l("index.php","error",a));const D=a.get("success");D==="disconnected"&&(d=!0,h="Success",c="Vous avez été déconnecté avec succès",l("index.php","success",a));D==="recipe-shared"&&(d=!0,h="Success",c="Votre recette vient d'être partagée, elle semble excellente !",l("index.php","success",a));D==="recipe-updated"&&(d=!0,h="Success",c="Votre recette a bien été mise à jour!",l("index.php","success",a));const X=a.get("reset");X==="success"&&(d=!0,h="Success",c="Un email a été envoyé à l'adresse que vous avez saisie",l("index.php","reset",a));const Y=a.get("login");Y==="success"&&(d=!0,h="Success",c="Vous êtes connecté avec succès",l("index.php","login",a));const M=a.get("register");M==="success"&&(d=!0,h="Success",c="Votre compte a été enregistré avec succès, vous pouvez maintenant vous connecter",l("index.php","register",a));M==="failed"&&(d=!0,h="Erreur",c="Problème dans la création de votre compte, veuillez vérifier que tous les champs soient correctement remplis",l("register.php","failed",a));const N=a.get("failed");N==="recipe-creation"&&(d=!0,h="Erreur",c="Veuillez vous enregistrer ou vous identifier avant de pouvoir partager une recette",l("register.php","failed",a));N==="update-recipe"&&(d=!0,h="Erreur",c="Veuillez vous enregistrer ou vous identifier avant de pouvoir modifier cette recette",l("register.php","failed",a));d&&new B(c,h);
