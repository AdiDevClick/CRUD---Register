var q=i=>{throw TypeError(i)};var C=(i,e,s)=>e.has(i)||q("Cannot "+s);var t=(i,e,s)=>(C(i,e,"read from private field"),s?s.call(i):e.get(i)),p=(i,e,s)=>e.has(i)?q("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,s),v=(i,e,s,u)=>(C(i,e,"write to private field"),u?u.call(i,s):e.set(i,s),s),m=(i,e,s)=>(C(i,e,"access private method"),s);function W(i,e={}){const s=document.createElement(i);for(const[u,T]of Object.entries(e))T!==null&&s.setAttribute(u,T);return s}function y(i,e){return new Promise(s=>{setTimeout(()=>{s(e)},i)})}var l;class M{constructor(e){p(this,l);this.alert=e.toasterContainer.querySelector(".toast"),v(this,l,new AbortController),e.toasterContainer.addEventListener("dragstart",s=>s.preventDefault(),{signal:t(this,l).signal}),e.toasterContainer.addEventListener("mousedown",this.startDrag.bind(this),{signal:t(this,l).signal,passive:!0}),e.toasterContainer.addEventListener("touchstart",this.startDrag.bind(this),{signal:t(this,l).signal,passive:!0}),window.addEventListener("mousemove",this.drag.bind(this),{signal:t(this,l).signal}),window.addEventListener("touchmove",this.drag.bind(this),{signal:t(this,l).signal}),window.addEventListener("touchend",this.endDrag.bind(this),{signal:t(this,l).signal}),window.addEventListener("mouseup",this.endDrag.bind(this),{signal:t(this,l).signal}),window.addEventListener("touchcancel",this.endDrag.bind(this),{signal:t(this,l).signal}),this.toaster=e,e.toasterContainer.addEventListener("onRemove",s=>{t(this,l).abort()},{once:!0})}startDrag(e){if(e.touches){if(e.touches.length>1)return;e=e.touches[0]}this.origin={x:e.screenX,y:e.screenY},this.disableTransition(),this.width=this.toaster.toasterContainer.offsetWidth}drag(e){if(this.origin){const s=e.touches?e.touches[0]:e,u={x:s.screenX-this.origin.x,y:s.screenY-this.origin.y};e.touches&&Math.abs(u.x)>Math.abs(u.y)&&(e.cancelable&&e.preventDefault(),e.stopPropagation()),this.lastTranslate=u,this.translate(100*u.x/this.width)}}translate(e){this.toaster.toasterContainer.style.transform="translate3d("+e+"%,  0, 0)"}disableTransition(){this.toaster.toasterContainer.style.transition="none"}enableTransition(){this.toaster.toasterContainer.style.transition=""}async endDrag(e){this.origin&&this.lastTranslate&&(this.enableTransition(),Math.abs(this.lastTranslate.x/this.toasterWidth)>.2&&(this.lastTranslate.x<0||this.lastTranslate.x>0)&&(this.alert.classList.add("close"),this.alert.addEventListener("animationend",()=>{this.toaster.toasterContainer.remove()},{once:!0}))),this.origin=null}get toasterWidth(){return this.toaster.toasterContainer.offsetWidth}}l=new WeakMap;var L,g,r,f,b,x,h,D,A,z,V,R;class N{constructor(e,s="Erreur"){p(this,h);p(this,L);p(this,g);p(this,r);p(this,f);p(this,b);p(this,x);v(this,L,e),v(this,g,s),this.toasterContainer=document.querySelector(".toast-container"),this.toasterContainer||(m(this,h,D).call(this),this.toasterContainer=document.querySelector(".toast-container")),v(this,x,document.querySelector(this.toasterContainer.dataset.template)),v(this,r,t(this,x).content.firstElementChild.cloneNode(!0)),v(this,f,t(this,r).querySelector(this.toasterContainer.dataset.progressbar)),v(this,b,t(this,r).querySelector(this.toasterContainer.dataset.closebtn)),m(this,h,z).call(this),m(this,h,A).call(this),t(this,r).addEventListener("animationend",()=>{m(this,h,V).call(this)},{once:!0}),t(this,b).addEventListener("click",u=>{m(this,h,R).call(this,u)},{once:!0}),new M(this)}}L=new WeakMap,g=new WeakMap,r=new WeakMap,f=new WeakMap,b=new WeakMap,x=new WeakMap,h=new WeakSet,D=function(){const e=W("div",{class:"toast-container",role:"alert","data-template":"#alert-layout","data-progressbar":".progress","data-elements":'{"title": ".text-1", "body": ".text-2"}',"data-closebtn":".toggle_btn-box","data-endpoint":"./templates/toaster_template.html"});document.body.append(e)},A=function(){if(this.toasterContainer)this.toasterContainer.insertAdjacentElement("beforeend",t(this,r));else return},z=function(){t(this,r).classList.add("active"),t(this,b).classList.add("open"),t(this,r).classList.add(t(this,g)),t(this,g)==="Success"?t(this,r).querySelector("i").classList.add("fa-check"):t(this,r).querySelector("i").classList.add("fa-info"),t(this,f).classList.add("active"),t(this,r).querySelector(".text-1").innerText=t(this,g),t(this,r).querySelector(".text-2").innerText=t(this,L)},V=async function(){await y(5e3),t(this,r).classList.remove("active"),t(this,r).classList.add("close"),await y(300),t(this,f).classList.remove("active"),t(this,r).remove();const e=new CustomEvent("onRemove",{detail:t(this,r),cancelable:!0,bubbles:!1});this.toasterContainer.dispatchEvent(e),this.toasterContainer.childNodes.length<=0&&this.toasterContainer.remove()},R=async function(e){e.preventDefault(),t(this,r).classList.remove("active"),t(this,r).classList.add("close"),await y(300),t(this,f).classList.remove("active"),t(this,r).addEventListener("animationend",()=>{t(this,r).remove(),this.toasterContainer.remove()},{once:!0})};function c(i,e=null,s=null){return s==null||s.delete(e),window.history.replaceState({},document.title,i)}let a,d,o=!1;const P=window.location,n=new URLSearchParams(P.search),E=n.get("error");E==="invalid-input"&&(o=!0,a="Veuillez modifier votre identifiant",c("index.php","error",n));E==="no-update_id"&&(o=!0,a="La recette à mettre à jour n'existe pas",c("index.php","error",n));E==="no-delete-id"&&(o=!0,a="La recette que vous tentez de supprimer n'existe pas",c("index.php","error",n));const U=n.get("delete");U==="success"&&(o=!0,d="Success",a="La recette a été supprimée avec succès",c("index.php","delete",n));U==="error"&&(o=!0,a="Une erreur s'est produite lors de la suppression de la recette",c("index.php","delete",n));const w=n.get("success");w==="disconnected"&&(o=!0,d="Success",a="Vous avez été déconnecté avec succès",c("index.php","success",n));w==="recipe-shared"&&(o=!0,d="Success",a="Votre recette vient d'être partagée, elle semble excellente !",c("index.php","success",n));w==="recipe-updated"&&(o=!0,d="Success",a="Votre recette a bien été mise à jour!",c("index.php","success",n));w==="recipe-unchanged"&&(o=!0,d="Success",a="Aucune modification apportée à votre recette",c("index.php","success",n));const _=n.get("reset");_==="success"&&(o=!0,d="Success",a="Un email a été envoyé à l'adresse que vous avez saisie",c("index.php","reset",n));const k=n.get("login");k==="success"&&(o=!0,d="Success",a="Vous êtes connecté avec succès",c("index.php","login",n));const j=n.get("register");j==="success"&&(o=!0,d="Success",a="Votre compte a été enregistré avec succès, vous pouvez maintenant vous connecter",c("index.php","register",n));j==="failed"&&(o=!0,d="Erreur",a="Problème dans la création de votre compte, veuillez vérifier que tous les champs soient correctement remplis",c("register.php","failed",n));const S=n.get("failed");S==="recipe-creation"&&(o=!0,d="Erreur",a="Veuillez vous enregistrer ou vous identifier avant de pouvoir partager une recette",c("register.php","failed",n));S==="update-recipe"&&(o=!0,d="Erreur",a="Cette recette ne vous appartient pas, vous ne pouvez la modifier",c("register.php","failed",n));S==="fetch"&&(o=!0,d="Erreur",a="Une erreur est survenue lors de la récupération de votre recette");o&&new N(a,d);
